

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Update (scarlet.update) &mdash; scarlet  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> scarlet
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_docs.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api_docs.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bbox.html">Bounding Boxes (<code class="docutils literal notranslate"><span class="pre">scarlet.bbox</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="blend.html">Blend (<code class="docutils literal notranslate"><span class="pre">scarlet.blend</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cache.html">Cache (<code class="docutils literal notranslate"><span class="pre">scarlet.cache</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="component.html">Components (<code class="docutils literal notranslate"><span class="pre">scarlet.component</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="display.html">Visualization (<code class="docutils literal notranslate"><span class="pre">scarlet.display</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="interpolation.html">Interpolation (<code class="docutils literal notranslate"><span class="pre">scarlet.interpolation</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="observation.html">Observations and Scenes (<code class="docutils literal notranslate"><span class="pre">scarlet.observation</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator.html">Proximal Operators (<code class="docutils literal notranslate"><span class="pre">scarlet.operator</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="psf.html">PSF matching (<code class="docutils literal notranslate"><span class="pre">scarlet.psf</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="resampling.html">Resampling (<code class="docutils literal notranslate"><span class="pre">scarlet.resampling</span></code>)</a></li>
<li class="toctree-l2"><a class="reference internal" href="source.html">Sources (<code class="docutils literal notranslate"><span class="pre">scarlet.source</span></code>)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Update (<code class="docutils literal notranslate"><span class="pre">scarlet.update</span></code>)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-scarlet.update">Reference/API</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">scarlet</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api_docs.html">API Documentation</a> &raquo;</li>
        
      <li>Update (<code class="docutils literal notranslate"><span class="pre">scarlet.update</span></code>)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/update.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Update-(scarlet.update)">
<h1>Update (<a class="reference internal" href="#"><span class="doc">scarlet.update</span></a>)<a class="headerlink" href="#Update-(scarlet.update)" title="Permalink to this headline">¶</a></h1>
<p>Methods to update sources and components in <em>scarlet</em>. By convention each update method takes a <a class="reference internal" href="component.html#scarlet.component.Component"><span class="std std-ref">Component</span></a> as the first argument, updates the parameters of the component in place, and returns the updated component.</p>
<div class="section" id="module-scarlet.update">
<span id="Reference/API"></span><h2>Reference/API<a class="headerlink" href="#module-scarlet.update" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="scarlet.update.fit_pixel_center">
<code class="descclassname">scarlet.update.</code><code class="descname">fit_pixel_center</code><span class="sig-paren">(</span><em>component</em>, <em>window=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#fit_pixel_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.fit_pixel_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the pixel with the maximum flux as the center</p>
<p>In case there is a nearby bright neighbor, we only update
the center within the immediate vascinity of the previous center.
This allows the center to shift over time, but prevents a large,
likely unphysical update.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>window: tuple of slices</strong></dt>
<dd><p class="first last">Slices in y and x of the central region to include in the fit.
If <cite>window</cite> is <cite>None</cite> then only the 3x3 grid of pixels centered
on the previous center are used. If it is desired to use the entire
morphology just set <cite>window=(slice(None), slice(None))</cite>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.monotonic">
<code class="descclassname">scarlet.update.</code><code class="descname">monotonic</code><span class="sig-paren">(</span><em>component</em>, <em>pixel_center</em>, <em>use_nearest=False</em>, <em>thresh=0</em>, <em>exact=False</em>, <em>bbox=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#monotonic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.monotonic" title="Permalink to this definition">¶</a></dt>
<dd><p>Make morphology monotonically decrease from the center</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>exact: `bool`</strong></dt>
<dd><p class="first last">Whether to use the (very slow) exact monotonicity proximal operator
(<cite>exact</cite> is <cite>True</cite>) or a projection operator to the monotonic space.</p>
</dd>
<dt><strong>See `~scarlet.operator.prox_monotonic`</strong></dt>
<dd></dd>
<dt><strong>for a description of the other parameters.</strong></dt>
<dd></dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.normalized">
<code class="descclassname">scarlet.update.</code><code class="descname">normalized</code><span class="sig-paren">(</span><em>component</em>, <em>type=’morph_max’</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#normalized"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.normalized" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize SED or morphology</p>
<p>In order to break degeneracies, either the SED or
morphology should have some form of normalization.
For consistency this should normally be the same for
all components in a blend.</p>
<p>For <cite>type=’sed’</cite> the sed matrix is normalized to
sum to unity.</p>
<p>For <cite>type=’morph’</cite> the morphology matrix is normalized
to sum to unity.</p>
<p>For <cite>type=’morph_max’</cite> the morphology matrix is
normalized so that its maximum value is one.</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.positive">
<code class="descclassname">scarlet.update.</code><code class="descname">positive</code><span class="sig-paren">(</span><em>component</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#positive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.positive" title="Permalink to this definition">¶</a></dt>
<dd><p>Make both the SED and morpholgy non-negative</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.positive_morph">
<code class="descclassname">scarlet.update.</code><code class="descname">positive_morph</code><span class="sig-paren">(</span><em>component</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#positive_morph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.positive_morph" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the morphology non-negative</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.positive_sed">
<code class="descclassname">scarlet.update.</code><code class="descname">positive_sed</code><span class="sig-paren">(</span><em>component</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#positive_sed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.positive_sed" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the SED non-negative</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.sparse_l0">
<code class="descclassname">scarlet.update.</code><code class="descname">sparse_l0</code><span class="sig-paren">(</span><em>component</em>, <em>thresh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#sparse_l0"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.sparse_l0" title="Permalink to this definition">¶</a></dt>
<dd><p>L0 norm (sparsity) on morphology</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.sparse_l1">
<code class="descclassname">scarlet.update.</code><code class="descname">sparse_l1</code><span class="sig-paren">(</span><em>component</em>, <em>thresh</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#sparse_l1"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.sparse_l1" title="Permalink to this definition">¶</a></dt>
<dd><p>L1 norm (sparsity) on morphology</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.symmetric">
<code class="descclassname">scarlet.update.</code><code class="descname">symmetric</code><span class="sig-paren">(</span><em>component</em>, <em>strength=1</em>, <em>use_prox=True</em>, <em>kernel=&lt;function lanczos&gt;</em>, <em>padding=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#symmetric"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.symmetric" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the source symmetric about its center</p>
<p>See <cite>~scarlet.operator.prox_uncentered_symmetry</cite>
for a description of the parameters.</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.threshold">
<code class="descclassname">scarlet.update.</code><code class="descname">threshold</code><span class="sig-paren">(</span><em>component</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#threshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cutoff threshold for pixels below the noise</p>
<p>Use the log histogram of pixel values to determine when the
source is fitting noise. This function works well to prevent
faint sources from growing large footprints but for large
diffuse galaxies with a wide range of pixel values this
does not work as well.</p>
<p>The region that contains flux above the threshold is contained
in <cite>component.bboxes[“thresh”]</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="scarlet.update.translation">
<code class="descclassname">scarlet.update.</code><code class="descname">translation</code><span class="sig-paren">(</span><em>component</em>, <em>direction=1</em>, <em>kernel=&lt;function lanczos&gt;</em>, <em>padding=3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/scarlet/update.html#translation"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scarlet.update.translation" title="Permalink to this definition">¶</a></dt>
<dd><p>Shift the morphology by a given amount</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Fred Moolekamp and Peter Melchior

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>